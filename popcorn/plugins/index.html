<!DOCTYPE>
<html>
<head>
  <title>Popcorn Plug-in Unit Tests</title>  
</head>
<body onload="runAllTests();">
  <div style="position:absolute;top:0px;left:0px;width:150px;height:100%">
    <h1>Popcorn Plug-in Unit Tests</h1>
    <button type="button" onclick="runAllTests();">Run all Tests</button>
    <ul id="menuItems">
      <li><a onclick="clearEvents();" target="out" href="attribution/popcorn.attribution.unit.html">attribution</a></li>
      <li><a onclick="clearEvents();" target="out" href="code/popcorn.code.unit.html">code</a></li>
      <li><a onclick="clearEvents();" target="out" href="facebook/popcorn.facebook.unit.html">facebook</a></li>
      <li><a onclick="clearEvents();" target="out" href="flickr/popcorn.flickr.unit.html">flickr</a></li>
      <li><a onclick="clearEvents();" target="out" href="footnote/popcorn.footnote.unit.html">footnote</a></li>
      <li><a onclick="clearEvents();" target="out" href="gml/popcorn.gml.unit.html">gml</a></li>
      <li><a onclick="clearEvents();" target="out" href="googlemap/popcorn.googlemap.unit.html">googlemap</a></li>
      <li><a onclick="clearEvents();" target="out" href="googlefeed/popcorn.googlefeed.unit.html">googlefeed</a></li>
      <li><a onclick="clearEvents();" target="out" href="image/popcorn.image.unit.html">image</a></li>
      <li><a onclick="clearEvents();" target="out" href="lastfm/popcorn.lastfm.unit.html">lastfm</a></li>
      <li><a onclick="clearEvents();" target="out" href="linkedin/popcorn.linkedin.unit.html">linkedin</a></li>
      <li><a onclick="clearEvents();" target="out" href="lowerthird/popcorn.lowerthird.unit.html">lowerthird</a></li>
      <li><a onclick="clearEvents();" target="out" href="mustache/popcorn.mustache.unit.html">mustache</a></li>
      <li><a onclick="clearEvents();" target="out" href="openmap/popcorn.openmap.unit.html">openmap</a></li>
      <li><a onclick="clearEvents();" target="out" href="pause/popcorn.pause.unit.html">pause</a></li>
      <li><a onclick="clearEvents();" target="out" href="processing/popcorn.processing.unit.html">processing</a></li>
      <li><a onclick="clearEvents();" target="out" href="subtitle/popcorn.subtitle.unit.html">subtitle</a></li>
      <li><a onclick="clearEvents();" target="out" href="tagthisperson/popcorn.tagthisperson.unit.html">tagthisperson</a></li>
      <li><a onclick="clearEvents();" target="out" href="timeline/popcorn.timeline.unit.html">timeline</a></li>
      <li><a onclick="clearEvents();" target="out" href="twitter/popcorn.twitter.unit.html">twitter</a></li>
      <li><a onclick="clearEvents();" target="out" href="webpage/popcorn.webpage.unit.html">webpage</a></li>
      <li><a onclick="clearEvents();" target="out" href="wikipedia/popcorn.wikipedia.unit.html">wikipedia</a></li>
      <li><a onclick="clearEvents();" target="out" href="wordriver/popcorn.wordriver.unit.html">wordriver</a></li>
     
    </ul>
  </div>
  <iframe id="out" name="out" style="position:absolute;top:0px;left:150px;height:100%;width:100%"></iframe>
  <script>
  var eventList = [];
  function runAllTests(){
    var testUrl = [ "attribution", "code", "facebook", "flickr", "footnote", "gml", 
                    "googlemap", "googlefeed", "image", "lastfm", "linkedin", "lowerthird", 
                    "mustache",  "openmap", "pause", "processing", "subtitle", "tagthisperson", 
                    "timeline", "twitter", "webpage", "wikipedia", "wordriver" ];
    
    var testDur = [ 7000, 9000, 7000, 12000, 9000, 8000,
                    9000, 5000, 8000, 7000, 6000, 7000,
                    6000, 7000, 7000, 6000, 12000, 3500,
                    5500 ,3500, 4000, 8000, 6000 ];

    var setTest = function( index ) {
      var url = function( str ) {
        return str + "/popcorn." + str + ".unit.html";
      };
      document.getElementById('out').src = url( testUrl[ index ] );
    };
      
    for ( var i = 0, delay = 0; i < testUrl.length; delay += testDur[i], i++ ) {
      (function ( j ) {
        var event = setTimeout(function() {
          setTest( j );
        }, delay);
        eventList.push(event);
      })( i );
    }
  }
  function clearEvents(){
    var len = eventList.length;
    for( var i = 0; i < len; i++ ) {
      clearTimeout( eventList[i] );
    }
    
    for( var i = 0; i < len; i++ ) {
      eventList.pop();
    }
  }
  </script>
</body>
</html>
